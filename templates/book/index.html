{% extends 'book/base.html' %}
{% load static %}

{% block content %}
<h1 style="margin-top: 10px;">こんにちは、{{ user }}さん</h1>
<p>おすすめしたい本を追加して下さい。追加の際は上のメニューからLoginをお願いします。初めての方は上のSign UpをしてからLoginをお願いします。</p>

<h3><i class="fas fa-book" style="margin-right: 15px;"></i>おすすめ本一覧</h3>

<table class="table table-bordered table-striped">
    <thead class="thead-dark">
        <tr>
            <th class="text-center" style="width: 120px;">画像</th>
            <th class="text-center" style="width: 200px;">タイトル</th>
            <th class="text-center" style="width: 150px;">著者</th>
            <th class="text-center" style="width: 150px;">おすすめレベル</th>
            <th class="text-center" style="width: 120px;">いいね</th>
            <th class="text-center" style="width: 150px;"></th>
        </tr>
    </thead>
    <tbody>
        {% for book in books %}
        <tr>
            <td class="text-center">
                {% if book.title == '独学プログラマー' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B07BKVP9QY/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B07BKVP9QY&linkCode=as2&tag=m2033099-22&linkId=08c3a28c0b60c0ecea44995af31b6deb"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B07BKVP9QY&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == '君の膵臓をたべたい' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B071RFTDZG/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B071RFTDZG&linkCode=as2&tag=m2033099-22&linkId=46a6765715ee9df7baa2d6e9f0a080ef">
                    <img border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B071RFTDZG&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == '超集中力' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B01FLFFF2Q/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B01FLFFF2Q&linkCode=as2&tag=m2033099-22&linkId=f712b2aa6a99c85574059bce769acc3e"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B01FLFFF2Q&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'DUO' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B07KY6Z241/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B07KY6Z241&linkCode=as2&tag=m2033099-22&linkId=aedc923c9196f9b0374d979d2b326baa"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B07KY6Z241&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'できるポケット HTML&CSS全辞典' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B084MBQ8W1/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B084MBQ8W1&linkCode=as2&tag=m2033099-22&linkId=79694dbbc35c4fa31c2f589461d283e1"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B084MBQ8W1&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'ストレスを力に変える教科書' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B01D34LCY2/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B01D34LCY2&linkCode=as2&tag=m2033099-22&linkId=b07dbb92d467af732d06b1b5c70fbf26"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B01D34LCY2&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif '現場で使えるDjangoの教科書' in book.title %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/4802094744/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4802094744&linkCode=as2&tag=m2033099-22&linkId=da564bd25365d997ff6bb5c031258d56"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4802094744&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'ゼロから作るDeep Learning' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/4873117585/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4873117585&linkCode=as2&tag=m2033099-22&linkId=5410131f01c9d23828b702741953c2bc"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4873117585&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'アイデアのつくり方' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/4484881047/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4484881047&linkCode=as2&tag=m2033099-22&linkId=e2536d6b3fef4f42aaae2bfe0fdddc8f"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4484881047&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'ゼロ' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B00G9KDQQU/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B00G9KDQQU&linkCode=as2&tag=m2033099-22&linkId=580adf3575d17f201edac975e38f1753"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B00G9KDQQU&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% elif book.title == 'チーズはどこへ消えた？' %}
                <a target="_blank"
                    href="https://www.amazon.co.jp/gp/product/B00KD2IK4S/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B00KD2IK4S&linkCode=as2&tag=m2033099-22&linkId=ccb3c09d815f4619c7f57b1fb5f1a4f8"><img
                        border="0"
                        src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B00KD2IK4S&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=m2033099-22"
                        style="margin: 15px;"></a>
                {% endif %}
            </td>
            <td class="text-center">{{ book.title }}</td>
            <td class="text-center">{{ book.author }}</td>
            <td class="text-center">{{ book.recommend_level }} / 10</td>
            <td class="text-center">
                <a href="{% url 'book:like' book_id=book.id %}" class="btn btn-primary btn-sm">いいね！({{book.like }})</a>
            </td>
            <td class="text-center">
                <a href="{% url 'book:book_detail' book_id=book.id %}" class="btn btn-primary btn-sm"
                    style="margin-right: 8px;">詳細</a>
                <!--ログインしている時は削除ボタンを表示する-->
                {% if user.is_authenticated %}
                <a href="{% url 'book:book_delete' book_id=book.id %}" class="btn btn-secondary btn-sm"
                    style="margin-left: 8px;">削除</a>
                {% else %}
                <a href="{% url 'login' %}" class="btn btn-secondary btn-sm" style="margin-left: 8px;">削除</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>



</table>
<div style="float: left;">
    {% if books.has_previous %}
    <a href="?page={{ books.previous_page_number }}">&lt; 前のページ</a>
    {% else %}
    <span>&lt; 前のページ</span>
    {% endif %}

    {{ books.number }}ページ

    {% if books.has_next %}
    <a href="?page={{ books.next_page_number }}">次のページ &gt;</a>
    {% else %}
    <span>次のページ &gt;</span>
    {% endif %}
</div>
<div style="clear: both;"></div>
<div style="margin-bottom: 10px;"></div>

<!--ログインしている時は追加ボタンを表示する-->
{% if user.is_authenticated %}
<div style="margin-left: 60px; float: left;">
    <a href="{% url 'book:book_add' %}" class="btn btn-primary btn-sm">追加</a>
</div>
{% else %}
<div style="margin-left: 60px; float: left;">
    <a href="{% url 'login' %}" class="btn btn-primary btn-sm">追加</a>
</div>
{% endif %}
<div style="float: right; margin-right: 30px;">
    <!--tweetボタン-->
    <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=本を追加しました。#recommend_book">Tweet</a>
</div>

<div style="clear: both;"></div>

<footer id="footer">
    <script
        type="text/javascript">amzn_assoc_ad_type = "responsive_search_widget"; amzn_assoc_tracking_id = "m2033099-22"; amzn_assoc_marketplace = "amazon"; amzn_assoc_region = "JP"; amzn_assoc_placement = ""; amzn_assoc_search_type = "search_widget"; amzn_assoc_width = "auto"; amzn_assoc_height = "auto"; amzn_assoc_default_search_category = ""; amzn_assoc_default_search_key = "プログラミング"; amzn_assoc_theme = "light"; amzn_assoc_bg_color = "FFFFFF"; </script>
    <script
        src="//z-fe.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1&Marketplace=JP"></script>
</footer>
<script type="text/javascript">
    new function () {

        var footerId = "footer";
        //メイン
        function footerFixed() {
            //ドキュメントの高さ
            var dh = document.getElementsByTagName("body")[0].clientHeight;
            //フッターのtopからの位置
            document.getElementById(footerId).style.top = "0px";
            var ft = document.getElementById(footerId).offsetTop;
            //フッターの高さ
            var fh = document.getElementById(footerId).offsetHeight;
            //ウィンドウの高さ
            if (window.innerHeight) {
                var wh = window.innerHeight;
            } else if (document.documentElement && document.documentElement.clientHeight != 0) {
                var wh = document.documentElement.clientHeight;
            }
            if (ft + fh < wh) {
                document.getElementById(footerId).style.position = "relative";
                document.getElementById(footerId).style.top = (wh - fh - ft - 1) + "px";
            }
        }

        //文字サイズ
        function checkFontSize(func) {

            //判定要素の追加	
            var e = document.createElement("div");
            var s = document.createTextNode("S");
            e.appendChild(s);
            e.style.visibility = "hidden"
            e.style.position = "absolute"
            e.style.top = "0"
            document.body.appendChild(e);
            var defHeight = e.offsetHeight;

            //判定関数
            function checkBoxSize() {
                if (defHeight != e.offsetHeight) {
                    func();
                    defHeight = e.offsetHeight;
                }
            }
            setInterval(checkBoxSize, 1000)
        }

        //イベントリスナー
        function addEvent(elm, listener, fn) {
            try {
                elm.addEventListener(listener, fn, false);
            } catch (e) {
                elm.attachEvent("on" + listener, fn);
            }
        }

        addEvent(window, "load", footerFixed);
        addEvent(window, "load", function () {
            checkFontSize(footerFixed);
        });
        addEvent(window, "resize", footerFixed);

    }

</script>
{% endblock content %}